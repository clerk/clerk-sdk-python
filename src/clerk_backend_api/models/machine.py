"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from __future__ import annotations
from .machinewithoutscopedmachines import (
    MachineWithoutScopedMachines,
    MachineWithoutScopedMachinesTypedDict,
)
from clerk_backend_api.types import BaseModel, UNSET_SENTINEL
from enum import Enum
from pydantic import model_serializer
from typing import List, Optional
from typing_extensions import NotRequired, TypedDict


class MachineObject(str, Enum):
    MACHINE = "machine"


class MachineTypedDict(TypedDict):
    object: MachineObject
    id: str
    r"""Unique identifier for the machine."""
    name: str
    r"""The name of the machine."""
    instance_id: str
    r"""The ID of the instance this machine belongs to."""
    created_at: int
    r"""Unix timestamp of creation."""
    updated_at: int
    r"""Unix timestamp of last update."""
    scoped_machines: List[MachineWithoutScopedMachinesTypedDict]
    r"""Array of machines this machine has access to."""
    default_token_ttl: NotRequired[int]
    r"""The default time-to-live (TTL) in seconds for tokens created by this machine."""


class Machine(BaseModel):
    object: MachineObject

    id: str
    r"""Unique identifier for the machine."""

    name: str
    r"""The name of the machine."""

    instance_id: str
    r"""The ID of the instance this machine belongs to."""

    created_at: int
    r"""Unix timestamp of creation."""

    updated_at: int
    r"""Unix timestamp of last update."""

    scoped_machines: List[MachineWithoutScopedMachines]
    r"""Array of machines this machine has access to."""

    default_token_ttl: Optional[int] = 3600
    r"""The default time-to-live (TTL) in seconds for tokens created by this machine."""

    @model_serializer(mode="wrap")
    def serialize_model(self, handler):
        optional_fields = set(["default_token_ttl"])
        serialized = handler(self)
        m = {}

        for n, f in type(self).model_fields.items():
            k = f.alias or n
            val = serialized.get(k)

            if val != UNSET_SENTINEL:
                if val is not None or k not in optional_fields:
                    m[k] = val

        return m
